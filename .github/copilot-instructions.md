# Copilot Instructions for AnotherWoW

## Архитектура проекта
- **MVC-подобная структура**: контроллеры (`src/controllers`), модели (`src/models`), шаблоны (`templates/pages`, `templates/partials`).
- **Точка входа**: `public/index.php` — запускает приложение, подключает роутер (`router.php`).
- **Роутинг**: маршруты определяются в `router.php`, контроллеры обрабатывают логику страниц.
- **Конфигурация**: настройки БД — `config/database.php`, инициализация — `bootstrap.php`.
- **Вспомогательные функции**: `src/helpers` и `src/utils.php` — для конвертации, форматирования, работы с хэшами и др.
- **Сервисы**: бизнес-логика и интеграция с внешними системами — `src/services`.
- **Сторонние библиотеки**: например, `src/libs/phpmailer` для отправки почты.

## Ключевые паттерны и конвенции
- **Контроллеры**: каждый контроллер отвечает за отдельную страницу или функциональный блок. Имена строго соответствуют назначению (`AdminPanelController.php`, `LoginController.php`).
- **Модели**: описывают сущности (пользователь, персонаж, сайт, аптайм).
- **Шаблоны**: разделены на страницы (`pages`) и фрагменты (`partials`). Используйте фрагменты для повторяющихся элементов интерфейса.
- **Хелперы**: для повторно используемой логики, не относящейся к бизнес-слою.
- **Статические ресурсы**: стили и изображения — в `public/css` и `public/images`.

## Важные рабочие процессы
- **Запуск локально**: откройте `public/index.php` через веб-сервер (Apache/Nginx). Убедитесь, что `config/database.php` корректно настроен.
- **Проверка БД**: используйте `check-database.php` для диагностики подключения.
- **Добавление новых страниц**:
  1. Создайте контроллер в `src/controllers`.
  2. Добавьте шаблон в `templates/pages`.
  3. Пропишите маршрут в `router.php`.
- **Расширение функционала**: используйте хелперы для общей логики, сервисы — для интеграций и бизнес-операций.

## Интеграции и зависимости
- **PHPMailer**: для отправки email (`src/libs/phpmailer`).
- **База данных**: подключение через `src/services/DatabaseConnection.php`, настройки — `config/database.php`.

## Примеры паттернов
- Контроллер:
  ```php
  class LoginController {
      public function handle() {
          // ... логика авторизации ...
      }
  }
  ```
- Хелпер:
  ```php
  function convertMoney($amount) {
      // ... конвертация валюты ...
  }
  ```
- Маршрут:
  ```php
  // router.php
  $router->addRoute('/login', 'LoginController@handle');
  ```

## Особенности
- Все бизнес-правила и интеграции выносите в сервисы и хелперы.
- Не смешивайте логику отображения и бизнес-логику.
- Следуйте именованию файлов и классов по назначению.

---
_Обновите этот файл при изменении архитектуры или рабочих процессов. Для уточнения паттернов — смотрите README.txt и соответствующие каталоги._
