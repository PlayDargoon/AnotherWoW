# Новая трёхколоночная структура Layout

## Концепция

Все три блока (левый, центральный, правый) теперь находятся в едином контейнере с использованием Flexbox. Body расширен до полной ширины всех трёх колонок.

## Параметры

### Body
```css
body {
    max-width: 1300px;  /* 280 + 740 + 280 */
}
```

**Расчёт ширины:**
- Левый блок: 280px
- Центральный контент: 740px
- Правый блок: 280px
- **Итого**: 1300px

### Layout Container
```css
.layout-container {
    display: flex;
    justify-content: center;
    gap: 0;
}
```

**Свойства:**
- `display: flex` - размещение в ряд
- `justify-content: center` - выравнивание по центру
- `gap: 0` - без отступов (10px в премиум режиме)

### Колонки

**Левая колонка (280px):**
```css
.layout-sidebar-left {
    width: 280px;
    flex-shrink: 0;
    order: 1;
}
```

**Центральная колонка (740px):**
```css
.layout-content {
    width: 740px;
    max-width: 740px;
    flex-shrink: 0;
    order: 2;
}
```

**Правая колонка (280px):**
```css
.layout-sidebar-right {
    width: 280px;
    flex-shrink: 0;
    order: 3;
}
```

**Ключевые моменты:**
- `flex-shrink: 0` - колонки не сжимаются
- `order` - контроль порядка отображения
- Фиксированные ширины

## Визуальная структура

```
┌─────────────────────────────────────────────────┐
│              Body (1300px)                      │
│ ┌──────────────────────────────────────────┐   │
│ │      Layout Container (Flexbox)          │   │
│ │ ┌────────┬───────────┬────────┐         │   │
│ │ │        │           │        │         │   │
│ │ │ Левое  │ Центр     │ Правое │         │   │
│ │ │ меню   │ контент   │ меню   │         │   │
│ │ │ 280px  │ 740px     │ 280px  │         │   │
│ │ │        │           │        │         │   │
│ │ └────────┴───────────┴────────┘         │   │
│ └──────────────────────────────────────────┘   │
└─────────────────────────────────────────────────┘
```

## Премиум дизайн

### Дополнительные стили
```css
.layout-container {
    gap: 10px !important;  /* Отступы между колонками */
}

.layout-sidebar-left,
.layout-sidebar-right {
    background: linear-gradient(...);
    padding: 15px;
}

.layout-sidebar-right {
    border: 2px solid #4a4a70;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
}
```

### Визуально в премиум режиме
```
┌─────────────────────────────────────────────────┐
│ ┌────────┐ ┌───────────┐ ┌────────┐           │
│ │ Левое  │ │ Центр     │ │ Правое │           │
│ │ (без   │ │           │ │ (с     │           │
│ │ рамки) │ │           │ │ рамкой)│           │
│ └────────┘ └───────────┘ └────────┘           │
│    ↑          10px gap       ↑                 │
│ Градиент                  Градиент+тень       │
└─────────────────────────────────────────────────┘
```

## HTML структура

```php
<body>
    <div class="block-border">
        <div class="layout-container">
            <aside class="layout-sidebar-left test3">
                <!-- Левое меню -->
            </aside>
            
            <main class="layout-content">
                <!-- Центральный контент -->
            </main>
            
            <aside class="layout-sidebar-right test2">
                <!-- Правое меню -->
            </aside>
        </div>
    </div>
</body>
```

## Преимущества новой структуры

### 1. Единый контейнер
✅ Все три блока внутри одного `.layout-container`  
✅ Централизованное управление  
✅ Легко управлять gap между колонками  

### 2. Flexbox
✅ Современная технология CSS  
✅ Автоматическое выравнивание  
✅ Контроль порядка через `order`  
✅ Простота адаптации  

### 3. Фиксированная ширина
✅ Предсказуемое поведение  
✅ Точный контроль layout  
✅ Не ломается при разных разрешениях  

### 4. Семантическая разметка
✅ `<aside>` для боковых панелей  
✅ `<main>` для основного контента  
✅ Улучшенная доступность  
✅ SEO-friendly  

## Сравнение: Было → Стало

| Параметр | Было | Стало |
|----------|------|-------|
| Body width | 740px | 1300px |
| Левый блок | absolute, right: 748px | flex, width: 280px |
| Правый блок | absolute, right: -290px | flex, width: 280px |
| Центр | static | flex, width: 740px |
| Позиционирование | Absolute | Flexbox |
| Gap между блоками | Нет | 0px (10px премиум) |
| Видимость блоков | За пределами body | Внутри body |

## Адаптивность

Для мобильных устройств можно добавить:

```css
@media (max-width: 1300px) {
    body {
        max-width: 100%;
    }
    
    .layout-container {
        flex-wrap: wrap;
    }
    
    .layout-sidebar-left,
    .layout-sidebar-right {
        width: 50%;
    }
    
    .layout-content {
        width: 100%;
        order: 3;
    }
}

@media (max-width: 768px) {
    .layout-container {
        flex-direction: column;
    }
    
    .layout-sidebar-left,
    .layout-sidebar-right,
    .layout-content {
        width: 100%;
    }
}
```

## Совместимость

### Обратная совместимость
- ✅ Классы `.test2` и `.test3` сохранены
- ✅ Все includes работают
- ✅ Старые стили не конфликтуют
- ✅ Плавная миграция

### Поддержка браузеров
- ✅ Chrome/Edge (полная)
- ✅ Firefox (полная)
- ✅ Safari (полная)
- ✅ Opera (полная)
- ⚠️ IE11 (частичная, требует префиксы)

## Файлы

- **Layout**: `templates/layout.html.php`
- **Стили**: `public/css/style.css`
- **Premium стили**: `public/css/premium-style.css`

## Особенности реализации

### Flexbox свойства
```css
display: flex;           /* Включение Flexbox */
flex-shrink: 0;         /* Запрет сжатия */
order: 1, 2, 3;         /* Порядок элементов */
justify-content: center; /* Выравнивание */
gap: 10px;              /* Отступы (премиум) */
```

### Фиксированные размеры
- Все колонки имеют фиксированную ширину
- `flex-shrink: 0` предотвращает сжатие
- `max-width` ограничивает рост

## Решённые проблемы

### ✅ Было: Блоки не видны
**Причина**: За пределами body (740px)  
**Решение**: Расширили body до 1300px

### ✅ Было: Сложное позиционирование
**Причина**: Absolute positioning с right  
**Решение**: Flexbox с фиксированными ширинами

### ✅ Было: Блоки накладывались
**Причина**: Z-index и absolute  
**Решение**: Flexbox естественный flow

## Будущие улучшения

- [ ] CSS Grid вместо Flexbox
- [ ] Адаптивные breakpoints
- [ ] Sticky sidebars при прокрутке
- [ ] Collapsible меню на мобильных
- [ ] Настраиваемые ширины колонок
